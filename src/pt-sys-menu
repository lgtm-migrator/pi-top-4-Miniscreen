#!/usr/bin/env python
# -*- coding: utf-8 -*-
# PYTHON_ARGCOMPLETE_OK

"""
Adapted from carousel from luma.examples by Richard Hull and contributors
"""

from demo_opts import get_device
import signal
from components.MenuManager import MenuManager
from components.helpers.ButtonPressHelper import ButtonPressHelper  # Soon not needed..


def signal_handler(signal, frame):
    print("Stopping...")
    app.stop()
    print("Stopped!")


# Capture and handle interrupts
signal.signal(signal.SIGINT, signal_handler)
signal.signal(signal.SIGTERM, signal_handler)


if __name__ == "__main__":
    try:
        ButtonPressHelper.init()  # Soon not needed..
        device = get_device()
        app = MenuManager(device)
        app.main_loop()
        app.stop()
    except KeyboardInterrupt:
        pass
